<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soma</title>
    <link rel="stylesheet" href="style.css" />

    <!-- FUENTE MONTSERRAT -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Zen+Dots&display=swap"
      rel="stylesheet" />

    <!-- VUE.JS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- MENU DE NAVEGACIÓN -->
      <nav class="menu">
        <ul class="menu-izquierda">
          <!-- ICONO DE LA PAGINA -->
          <li>
            <a href="#inicio">
              <img src="imgs/icono.png" alt="ICONO PAGINA" class="icono" />
              <span class="logo-texto">
                <span>SOMA</span>
                <br />
                <span>ESSENTIALS</span>
              </span>
            </a>
          </li>

          <li>
            <a href="#" @click.prevent="vistaActual = 'tienda'" data-traduccion="menu-inicio">
              Inicio
            </a>
          </li>
          <li>
            <a href="#" @click.prevent="vistaActual = 'productos'" data-traduccion="menu-productos">
              Productos
            </a>
          </li>
          <li>
            <a href="#" @click.prevent="vistaActual = 'acercade'" data-traduccion="menu-acercade">
              Acerca de
            </a>
          </li>
        </ul>

        <div class="menu-derecha">
          <!-- ENLACE AL CARRITO CON CONTADOR DE PRODUCTOS -->
          <a href="#" class="enlace-icono" @click.prevent="vistaActual = 'carrito'">
            <img src="imgs/carrito.svg" alt="Carrito" />
            <span>
              <span data-traduccion="carrito">Carrito</span>
              ({{ carrito.length }})
            </span>
          </a>
          <!-- SELECTOR DE IDIOMA (ESPAÑOL/INGLÉS) -->
          <a href="#" class="enlace-icono" onclick="cambiarIdioma()">
            <img src="imgs/idioma.svg" alt="Idioma" />
            <span data-traduccion="texto-idioma">Idioma</span>
          </a>
          <!-- BOTÓN DE USUARIO: MUESTRA PERFIL SI ESTÁ LOGUEADO O REGISTRO SI NO -->
          <a
            href="#"
            class="enlace-usuario"
            @click.prevent="vistaActual = usuarioYaRegistrado ? 'perfil' : 'registro'">
            <img src="imgs/usuario.svg" alt="Usuario" />
            <span v-if="usuarioYaRegistrado">Bienvenido, {{ usuarioYaRegistrado.nombre }}</span>
            <span v-else>Registrarse / Iniciar Sesión</span>
          </a>
        </div>
      </nav>
      <br />

      <!-- PÁGINA PRINCIPAL DE LA TIENDA -->
      <main class="contenido" v-if="vistaActual === 'tienda'">
        <!-- PORTADA DE BIENVENIDA -->
        <section class="hero-section">
          <div class="hero-content">
            <span class="hero-badge">TU BIENESTAR, NUESTRA PRIORIDAD</span>
            <h1 class="hero-title">Soma Essentials</h1>
            <p class="hero-subtitle">
              No dejes que tu espalda o el cansancio decidan por ti. En Soma Essentials te ayudamos
              a resetear el cuerpo: liberamos tus nudos, enderezamos tu día y recargamos tus pilas.
            </p>
            <!-- BOTONES DE ACCIÓN PRINCIPAL -->
            <div class="hero-buttons">
              <button @click="vistaActual = 'productos'" class="btn-hero-primary">
                Explorar Productos
              </button>
              <button @click="vistaActual = 'acercade'" class="btn-hero-secondary">
                Conocer Más
              </button>
            </div>
          </div>
        </section>

        <!-- SECCION DE PRODUCTOS DESTACADOS -->
        <section id="productos-destacados">
          <h2 data-traduccion="productos-destacados">Productos destacados</h2>

          <!-- CARRUSEL DE PRODUCTOS RECOMENDADOS -->
          <div class="carrusel">
            <div class="carrusel-pista">
              <!-- Clon de la última -->
              <div class="diapositiva">
                <img
                  src="imgs/centrum_women.png"
                  alt="Producto 3"
                  @click="verDetallesProducto('Centrum Women Multivitamínico')"
                  style="cursor: pointer" />
              </div>

              <!-- Slides reales (CLICABLES) -->
              <div class="diapositiva">
                <img
                  src="imgs/pistola_masaje.jpg"
                  alt="Producto 1"
                  @click="verDetallesProducto('Pistola de Masaje Profesional')"
                  style="cursor: pointer" />
              </div>
              <div class="diapositiva">
                <img
                  src="imgs/sensor_espalda.png"
                  alt="Producto 2"
                  @click="verDetallesProducto('Sensor Corrector de Postura')"
                  style="cursor: pointer" />
              </div>
              <div class="diapositiva">
                <img
                  src="imgs/centrum_women.png"
                  alt="Producto 3"
                  @click="verDetallesProducto('Centrum Women Multivitamínico')"
                  style="cursor: pointer" />
              </div>

              <!-- Clon de la primera -->
              <div class="diapositiva">
                <img
                  src="imgs/pistola_masaje.jpg"
                  alt="Producto 1"
                  @click="verDetallesProducto('Pistola de Masaje Profesional')"
                  style="cursor: pointer" />
              </div>
            </div>
          </div>
        </section>
        <br />

        <!-- SECCION DE LISTA DE PRODUCTOS -->
        <section id="lista-productos">
          <h2 data-traduccion="nuestros-productos">Nuestros Productos</h2>
          <div class="contenedor-productos">
            <div class="producto" v-for="producto in productos">
              <!-- IMAGEN CLICABLE PARA VER DETALLES -->
              <img
                :src="producto.imagen"
                :alt="producto.nombre"
                @click="verDetallesProducto(producto.nombre)"
                style="cursor: pointer" />
              <h3>{{ producto.nombre }}</h3>
              <p class="precio">{{ producto.precio }} €</p>
              <button
                class="botonAñadirAlCarrito"
                @click="agregarAlCarrito(producto)"
                :disabled="producto.disponibilidad <= 0"
                :class="{ 'btn-sin-stock': producto.disponibilidad <= 0 }"
                data-traduccion="btn-agregar">
                <span v-if="producto.disponibilidad > 0">Añadir al carrito</span>
                <span v-else data-traduccion="sin-stock">Sin stock</span>
              </button>
            </div>
          </div>
        </section>
      </main>

      <!-- SECCION DE CARRITO -->
      <section class="seccion-carrito" v-if="vistaActual === 'carrito'">
        <h2 data-traduccion="titulo-carrito">Tu carrito</h2>
        <!-- MENSAJE CUANDO NO HAY PRODUCTOS -->
        <div v-if="carrito.length === 0">
          <p data-traduccion="carrito-vacio">¡Tu carrito está vacío. Añade algo a tu carrito!</p>
        </div>
        <!-- LISTA DE PRODUCTOS EN EL CARRITO -->
        <div v-else>
          <ul>
            <!-- CADA PRODUCTO CON SU PRECIO Y BOTÓN ELIMINAR -->
            <li v-for="(item, index) in carrito" :key="index">
              <span>{{ item.nombre }} - {{ item.precio }} €</span>
              <button @click="eliminarDelCarrito(index)" class="btn-eliminar">
                <img src="imgs/trash.svg" alt="Eliminar" />
                <span data-traduccion="btn-eliminar">Eliminar</span>
              </button>
            </li>
          </ul>
          <!-- RESUMEN DEL TOTAL Y BOTÓN DE COMPRA -->
          <div class="total-compra">
            <hr />
            <h3>
              <span data-traduccion="total">Total</span>
              : {{ totalCarrito }} €
            </h3>
            <button @click="confirmarPedido" data-traduccion="btn-confirmar">
              Confirmar Pedido
            </button>
          </div>
        </div>
        <button @click="vistaActual = 'tienda'" data-traduccion="btn-seguir-comprando">
          Seguir comprando
        </button>
      </section>

      <!-- PÁGINA DE AUTENTICACIÓN -->
      <section v-if="vistaActual === 'registro'" class="seccion-registro">
        <!-- PESTAÑAS PARA ALTERNAR ENTRE LOGIN Y REGISTRO -->
        <div class="tabs-auth">
          <button
            @click="modoAutenticacion = 'login'"
            :class="{ 'tab-activo': modoAutenticacion === 'login' }">
            <span data-traduccion="tab-login">Iniciar Sesión</span>
          </button>
          <button
            @click="modoAutenticacion = 'registro'"
            :class="{ 'tab-activo': modoAutenticacion === 'registro' }">
            <span data-traduccion="tab-registro">Registrarse</span>
          </button>
        </div>

        <!-- FORMULARIO DE LOGIN -->
        <div v-if="modoAutenticacion === 'login'" class="formulario formulario-login">
          <h2 data-traduccion="titulo-login">Iniciar Sesión</h2>

          <!-- CAMPO ID DE USUARIO -->
          <div class="campo-formulario">
            <input type="text" v-model="usuarioLogin.id" placeholder="ID de usuario (5 números)" />
          </div>

          <!-- EMAIL -->
          <div class="campo-formulario">
            <input type="email" v-model="usuarioLogin.email" placeholder="Correo electrónico" />
          </div>

          <!-- BOTÓN DE INICIO DE SESIÓN (SE ACTIVA AL LLENAR LOS CAMPOS) -->
          <button
            @click="iniciarSesion"
            :class="{ 'btn-activo': usuarioLogin.id.length > 0 && usuarioLogin.email.length > 0, 'btn-desactivado': usuarioLogin.id.length === 0 || usuarioLogin.email.length === 0 }"
            data-traduccion="btn-iniciar-sesion">
            Iniciar Sesión
          </button>
        </div>

        <!-- FORMULARIO DE REGISTRO -->
        <div v-if="modoAutenticacion === 'registro'" class="formulario">
          <h2 data-traduccion="titulo-registro" style="grid-column: 1 / -1; margin-bottom: 0">
            Registrarse
          </h2>

          <!-- CAMPO NOMBRE CON VALIDACIÓN EN TIEMPO REAL -->
          <div class="campo-formulario">
            <input
              type="text"
              v-model="usuarioNuevo.nombre"
              @input="validarCampo('nombre')"
              :class="{ 'input-error': errores.nombre }"
              placeholder="Nombre completo" />
            <span class="mensaje-error" v-if="errores.nombre">{{ errores.nombre }}</span>
          </div>

          <!-- CAMPO ID CON VALIDACIÓN -->
          <div class="campo-formulario">
            <input
              type="text"
              v-model="usuarioNuevo.id"
              @input="validarCampo('id')"
              :class="{ 'input-error': errores.id }"
              placeholder="ID (5 números)" />
            <span class="mensaje-error" v-if="errores.id">{{ errores.id }}</span>
          </div>

          <!-- CAMPO EMAIL CON VALIDACIÓN -->
          <div class="campo-formulario">
            <input
              type="email"
              v-model="usuarioNuevo.email"
              @input="validarCampo('email')"
              :class="{ 'input-error': errores.email }"
              placeholder="Correo electrónico" />
            <span class="mensaje-error" v-if="errores.email">{{ errores.email }}</span>
          </div>

          <!-- CAMPO TELÉFONO CON VALIDACIÓN -->
          <div class="campo-formulario">
            <input
              type="text"
              v-model="usuarioNuevo.telefono"
              @input="validarCampo('telefono')"
              :class="{ 'input-error': errores.telefono }"
              placeholder="Teléfono (9 dígitos)" />
            <span class="mensaje-error" v-if="errores.telefono">{{ errores.telefono }}</span>
          </div>

          <!-- CAMPO CUENTA BANCARIA CON VALIDACIÓN IBAN -->
          <div class="campo-formulario">
            <input
              type="text"
              v-model="usuarioNuevo.cuenta"
              @input="validarCampo('cuenta')"
              :class="{ 'input-error': errores.cuenta }"
              placeholder="Cuenta Bancaria (IBAN)" />
            <span class="mensaje-error" v-if="errores.cuenta">{{ errores.cuenta }}</span>
          </div>

          <!-- BOTÓN DE REGISTRO (SE ACTIVA AL EMPEZAR A LLENAR) -->
          <button
            @click="validarRegistro"
            :class="{ 'btn-activo': usuarioNuevo.nombre.length > 0, 'btn-desactivado': usuarioNuevo.nombre.length === 0 }"
            data-traduccion="btn-registrarse">
            Registrarse
          </button>
        </div>
        <button @click="vistaActual = 'tienda'" data-traduccion="btn-volver-tienda">
          Volver a la tienda
        </button>
      </section>

      <!-- SECCION DE PERFIL -->
      <section v-if="vistaActual === 'perfil'" class="seccion-perfil">
        <h2 data-traduccion="titulo-perfil">Tu Perfil de Usuario</h2>
        <!-- DATOS DEL USUARIO LOGUEADO -->
        <div class="tarjeta-perfil">
          <p>
            <strong data-traduccion="campo-nombre">Nombre:</strong>
            {{ usuarioYaRegistrado.nombre }}
          </p>
          <p>
            <strong>ID:</strong>
            {{ usuarioYaRegistrado.id }}
          </p>
          <p>
            <strong data-traduccion="campo-email">Email:</strong>
            {{ usuarioYaRegistrado.email }}
          </p>
          <p>
            <strong data-traduccion="campo-telefono">Teléfono:</strong>
            {{ usuarioYaRegistrado.telefono }}
          </p>
        </div>
        <br />
        <button @click="cerrarSesion" class="btn-salir" data-traduccion="btn-cerrar-sesion">
          Cerrar Sesión
        </button>
        <button @click="vistaActual = 'tienda'" data-traduccion="btn-volver-tienda">
          Volver a la tienda
        </button>
      </section>

      <!-- PÁGINA SOBRE NOSOTROS -->
      <section v-if="vistaActual === 'acercade'" class="seccion-acercade">
        <h2 data-traduccion="titulo-acercade">ACERCA DE NOSOTROS</h2>
        <p data-traduccion="texto-acercade">
          En SOMA creemos que el bienestar no tiene por qué ser complicado. Nacimos con la idea de
          que cuidar tu cuerpo y tu mente debe ser algo natural y accesible, sin términos extraños
          ni rutinas imposibles. Simplemente, estamos aquí para ayudarte a sentirte mejor cada día.
          Nos dedicamos a elegir productos que realmente marcan la diferencia en tu rutina. Desde
          vitaminas que te dan ese empujón extra hasta masajeadores diseñados para liberar el estrés
          acumulado, cada artículo en nuestra tienda ha sido seleccionado pensando en tu descanso y
          tu energía. No somos solo una tienda de salud; queremos ser tu aliado de confianza. En
          SOMA, nuestro compromiso es ofrecerte soluciones prácticas y honestas para que alcances tu
          mejor versión, siempre a tu ritmo y sin complicaciones.
        </p>

        <!-- VALORES DE LA EMPRESA EN TARJETAS -->
        <div class="grid-valores">
          <div class="card-valor">
            <img src="imgs/premium.svg" alt="Premium" class="icono-valor" />
            <h3 data-traduccion="valor1-titulo">Calidad Premium</h3>
            <p data-traduccion="valor1-texto">
              Productos seleccionados cuidadosamente para garantizar los mejores resultados
            </p>
          </div>

          <div class="card-valor">
            <img src="imgs/heart.svg" alt="Heart" class="icono-valor" />
            <h3 data-traduccion="valor2-titulo">Bienestar Natural</h3>
            <p data-traduccion="valor2-texto">
              Soluciones naturales y efectivas para tu cuerpo y mente sin complicaciones
            </p>
          </div>

          <div class="card-valor">
            <img src="imgs/trust.svg" alt="Trust" class="icono-valor" />
            <h3 data-traduccion="valor3-titulo">Confianza Total</h3>
            <p data-traduccion="valor3-texto">
              Tu aliado de confianza en el camino hacia tu mejor versión personal
            </p>
          </div>
        </div>
      </section>

      <!-- PÁGINA DE CATÁLOGO COMPLETO -->
      <section v-if="vistaActual === 'productos'" class="seccion-productos">
        <h2>PRODUCTOS</h2>
        <div class="contenedor-productos">
          <div class="producto" v-for="producto in productos">
            <img
              :src="producto.imagen"
              :alt="producto.nombre"
              @click="verDetallesProducto(producto.id)"
              style="cursor: pointer" />
            <h3>{{ producto.nombre }}</h3>
            <p class="precio">{{ producto.precio }} €</p>
            <button
              class="botonAñadirAlCarrito"
              @click="agregarAlCarrito(producto)"
              :disabled="producto.disponibilidad <= 0"
              :class="{ 'btn-sin-stock': producto.disponibilidad <= 0 }">
              <span v-if="producto.disponibilidad > 0" data-traduccion="btn-agregar">
                Añadir al carrito
              </span>
              <span v-else data-traduccion="sin-stock">Sin stock</span>
            </button>
          </div>
        </div>
      </section>

      <!-- VISTA DETALLADA DE UN PRODUCTO ESPECÍFICO -->
      <section
        v-if="vistaActual === 'detalle-producto' && productoSeleccionado"
        class="seccion-detalle">
        <div class="detalle-producto">
          <!-- IMAGEN A TAMAÑO GRANDE -->
          <div class="detalle-imagen">
            <img :src="productoSeleccionado.imagen" :alt="productoSeleccionado.nombre" />
          </div>

          <!-- DETALLES: NOMBRE, PRECIO, DESCRIPCIÓN Y STOCK -->
          <div class="detalle-info">
            <h2>{{ productoSeleccionado.nombre }}</h2>
            <p class="precio-grande">{{ productoSeleccionado.precio }} €</p>

            <!-- DESCRIPCIÓN DEL PRODUCTO -->
            <p class="descripcion" v-if="productoSeleccionado.descripcion">
              {{ productoSeleccionado.descripcion }}
            </p>
            <p class="descripcion" v-else>No hay descripcion sobre este producto.</p>

            <!-- INDICADOR DE STOCK -->
            <p class="disponibilidad" v-if="productoSeleccionado.disponibilidad > 0">
              En stock: {{ productoSeleccionado.disponibilidad }} unidades disponibles
            </p>
            <p class="disponibilidad sin-stock" v-else>Producto agotado</p>

            <!-- ACCIONES: AÑADIR AL CARRITO Y VOLVER -->
            <div class="detalle-botones">
              <button
                class="botonAñadirAlCarrito"
                @click="agregarAlCarrito(productoSeleccionado)"
                :disabled="productoSeleccionado.disponibilidad <= 0"
                :class="{ 'btn-sin-stock': productoSeleccionado.disponibilidad <= 0 }">
                <span v-if="productoSeleccionado.disponibilidad > 0" data-traduccion="btn-agregar">
                  Añadir al carrito
                </span>
                <span v-else data-traduccion="sin-stock">Sin stock</span>
              </button>
              <button @click="vistaActual = 'tienda'" class="btn-volver">Volver a la tienda</button>
            </div>
          </div>
        </div>
      </section>

      <!-- COMPONENTE DE PIE DE PÁGINA -->
      <footer-soma></footer-soma>
    </div>

    <!-- ARCHIVO JAVASCRIPT PRINCIPAL CON LA LÓGICA DE VUE -->
    <script src="script.js"></script>
  </body>
</html>
